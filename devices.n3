@prefix : <http://projects.bigasterisk.com/room/>.
@prefix lights: <http://projects.bigasterisk.com/room/lights/>.
@prefix device: <http://projects.bigasterisk.com/device/>.
@prefix control: <http://projects.bigasterisk.com/control/>.
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix slashport: <http://slash.bigasterisk.com/parport/3bc#> .
@prefix port: <http://bang.bigasterisk.com/parport/parport0#> .
@prefix onewire: <http://bigasterisk.com/onewire/> .
@prefix cmd: <http://bigasterisk.com/magma/cmd/> .

device:lock1 rdfs:label "downstairs door lock" .

slashport:pin2 a :ParportPin; 
  :host "slash.bigasterisk.com";
  :port "0x3bc"; 
  :bit 2 .

port:pin0 a :ParportPin; :host "bigasterisk.com"; :port "/dev/parport0"; :bit 0 .

port:pin3 a :ParportPin; :host "bigasterisk.com"; :port "/dev/parport0"; :bit 3 .
port:pin4 a :ParportPin; :host "bigasterisk.com"; :port "/dev/parport0"; :bit 4 .
port:pin5 a :ParportPin; :host "bigasterisk.com"; :port "/dev/parport0"; :bit 5 .
port:pin6 a :ParportPin; :host "bigasterisk.com"; :port "/dev/parport0"; :bit 6 .
port:pin7 a :ParportPin; :host "bigasterisk.com"; :port "/dev/parport0"; :bit 7 .

:pulse rdfs:comment "number of seconds this pin should stay high when it is set to 1. Then the pin automatically goes back to 0." .

port:pin0 rdfs:label "unlock door" .
port:pin3 rdfs:label "heater power" .

# .1 second pulse was too short for redlight, once

port:pin5 rdfs:label "outdoor off"; :pulse ".4" . cmd:deckLightOff :oneShot port:pin5 .
port:pin7 rdfs:label "outdoor on"; :pulse ".4" . cmd:deckLightOn :oneShot port:pin7 .

port:pin4 rdfs:label "bedroomred off"; :pulse ".8" . cmd:bedroomRedLightOff :oneShot port:pin4 .
port:pin6 rdfs:label "bedroomred on"; :pulse ".8" . cmd:bedroomRedLightOn :oneShot port:pin6 .

port:pinBusy rdfs:label "heater sense" .


{ device:lock1 :state :locked   } => { port:pin0 :value 0 } .
{ device:lock1 :state :unlocked } => { port:pin0 :value 1 } .

{ :bluetooth :senses :drewTreo } => { device:lock1 :state :unlocked } .

#drew's phone = friendly phone
#kelsi phone = friendly phone
#bluetooth senses friendly phone   ->   all doors are unlocked
#all locks = device:lock1

# maybe each tool should have its own little graph, and it announces
# changes to that graph. the listener tools make a combined-graph of
# the sources, and draw their conclusions on that


onewire:addr10CB6CBE0008005E rdfs:label "bedroom" .
